{"version":3,"file":"react-swirl.cjs.production.min.js","sources":["../src/interface.ts","../src/helper.ts","../src/styledComponents.ts","../src/index.tsx"],"sourcesContent":["export enum Order {\n  CENTER = 'center',\n  NEXT = 'next',\n  LAST = 'last',\n  HIDDEN = 'hidden',\n}\n\nexport enum Theme {\n  DARK = 'dark',\n  LIGHT = 'light',\n}\n\nexport interface DisplayElement {\n  child: any;\n  order: Order;\n  index: number;\n}\n\nexport interface ComponentSettings {\n  showDots?: boolean;\n  showNav?: boolean;\n  autoPlay?: boolean;\n  playSpeed?: number;\n  pauseOnHover?: boolean;\n  children: any[];\n  theme?: Theme;\n}\n","import { Order, DisplayElement } from './interface';\n\nexport function generateOrderArray(arr: Array<any>): Array<Order> {\n  return arr.map((_i: any, idx: number) => {\n    let order: Order;\n    switch (idx) {\n      case 0:\n        order = Order.CENTER;\n        break;\n      case 1:\n        order = Order.NEXT;\n        break;\n      case arr.length - 1:\n        order = Order.LAST;\n        break;\n      default:\n        order = Order.HIDDEN;\n    }\n    return order;\n  });\n}\n\nexport function reallocateOrder(\n  componentArray: Array<any>,\n  orderArray: Array<Order>\n): Array<DisplayElement> {\n  return componentArray.map((i: any, idx: number) => {\n    const order = orderArray[idx];\n    return { child: i, order, index: idx };\n  });\n}\n\nexport function rotate(\n  oldCenter: number,\n  newCenter: number,\n  array: Array<any>\n) {\n  const arrayCopy = [...array];\n  while (oldCenter !== newCenter) {\n    if (newCenter > oldCenter) {\n      const data: any = arrayCopy.pop();\n      arrayCopy.unshift(data);\n      newCenter--;\n    } else {\n      const data: any = arrayCopy.shift();\n      arrayCopy.push(data);\n      newCenter++;\n    }\n  }\n  return arrayCopy;\n}\n","import styled from 'styled-components';\n\nconst animation = 'all 0.6s ease-in-out';\nconst lightColor = 'rgba(255, 255, 255, 0.5)';\nconst lightColorHover = 'rgba(255, 255, 255, 0.8)';\nconst darkColor = 'rgba(0, 0, 0, 0.5)';\nconst darkColorHover = 'rgba(0, 0, 0, 0.8)';\n\nexport const Wrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  overflow: hidden;\n  flex-direction: column;\n  padding: 0 20px;\n  position: relative;\n  box-sizing: border-box;\n`;\n\nexport const Container = styled.div`\n  width: 100%;\n  height: 100%;\n  margin: 0 auto;\n  position: relative;\n`;\n\nexport const Overlay = styled.div`\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: white;\n  opacity: 0.4;\n  transition: opacity 0.3s linear 0.5s;\n`;\n\nconst ControlButton = styled.div`\n  z-index: 9;\n  position: absolute;\n  top: 50%;\n  transform: translate(0, -50%);\n  cursor: pointer;\n  text-align: center;\n  width: 16px;\n  transition: ${animation};\n\n  span {\n    border: solid ${props => (props.theme === 'dark' ? darkColor : lightColor)};\n    border-width: 0 4px 4px 0;\n    display: inline-block;\n    padding: 4px;\n    transition: ${animation};\n  }\n\n  &:hover {\n    span {\n      border-color: ${props =>\n        props.theme === 'dark' ? darkColorHover : lightColorHover};\n    }\n    transform: translate(0, -50%) scale(1.1);\n  }\n`;\n\nexport const NextButton = styled(ControlButton)`\n  right: 4px;\n  span {\n    transform: rotate(-45deg);\n  }\n`;\n\nexport const LastButton = styled(ControlButton)`\n  span {\n    transform: rotate(135deg);\n  }\n  left: 4px;\n`;\n\nexport const Nav = styled.div``;\n\nexport const ChildWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n`;\n\nexport const Slide = styled.div`\n  position: absolute;\n  user-select: none;\n  transition: ${animation};\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  overflow: hidden;\n  max-width: 80%;\n\n  &:hover {\n    cursor: pointer;\n  }\n  &.center {\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    z-index: 9;\n    cursor: auto;\n\n    ${Overlay} {\n      opacity: 0;\n    }\n  }\n  &.last {\n    left: 40%;\n    top: 50%;\n    transform: translate(-50%, -50%) scale(0.9);\n    z-index: 6;\n  }\n  &.next {\n    left: 60%;\n    top: 50%;\n    transform: translate(-50%, -50%) scale(0.9);\n    z-index: 6;\n  }\n  &.hidden {\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%) scale(0.8);\n    opacity: 0;\n    z-index: 3;\n  }\n`;\n\nexport const Dots = styled.div`\n  z-index: 9;\n  margin-top: 5px;\n  user-select: none;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: wrap;\n  div {\n    transition: ${animation};\n    padding: 0 8px;\n    &:hover {\n      cursor: pointer;\n    }\n\n    &.active {\n      padding: 0;\n      span {\n        background-color: ${props =>\n          props.theme === 'dark' ? darkColorHover : lightColorHover};\n        width: 16px;\n      }\n    }\n  }\n  span {\n    display: inline-block;\n    width: 8px;\n    height: 8px;\n    border-radius: 8px;\n    background-color: ${props =>\n      props.theme === 'dark' ? darkColor : lightColor};\n    transition: ${animation};\n    vertical-align: middle;\n  }\n`;\n","import React, { useRef, useEffect, useState } from 'react';\n\nimport { Order, DisplayElement, ComponentSettings, Theme } from './interface';\nimport { generateOrderArray, reallocateOrder, rotate } from './helper';\nimport {\n  Wrapper,\n  Container,\n  Overlay,\n  Slide,\n  Dots,\n  NextButton,\n  LastButton,\n  ChildWrapper,\n  Nav,\n} from './styledComponents';\n\nexport const ReactSwirl = ({\n  children,\n  showDots = true,\n  showNav = true,\n  autoPlay = true,\n  pauseOnHover = true,\n  playSpeed = 5000,\n  theme = Theme.DARK,\n}: ComponentSettings) => {\n  const initialOrderArray = generateOrderArray(children);\n  const [contentHeight, setContentHeight] = useState(0);\n  const [current, setCurrent] = useState(0);\n  const [orderArray, setOrderArray] = useState(initialOrderArray);\n  const [displayArray, setDisplayArray] = useState(\n    reallocateOrder(children, orderArray)\n  );\n\n  const targetRef = useRef<HTMLDivElement>();\n  let autoPlayInterval: any;\n\n  useEffect(() => {\n    let maxHeight = contentHeight;\n    if (targetRef.current) {\n      const children = targetRef.current.children;\n      if (children && children.length) {\n        Array.from(children).forEach(child => {\n          const grandChildren = child.children;\n          if (grandChildren && grandChildren.length) {\n            const element = Array.from(grandChildren)[0] as HTMLDivElement;\n            const height = element.offsetHeight;\n            if (height > maxHeight) {\n              maxHeight = height;\n            }\n          }\n        });\n      }\n      setTimeout(() => {\n        setContentHeight(maxHeight);\n      });\n    }\n  }, [contentHeight]);\n\n  if (autoPlay) {\n    useEffect(() => {\n      startAutoPlay();\n      return () => stopAutoPlay();\n    });\n  }\n\n  const onMouseEnter = () => {\n    if (autoPlay && pauseOnHover) {\n      stopAutoPlay();\n    }\n  };\n\n  const onMouseLeave = () => {\n    if (autoPlay && pauseOnHover) {\n      startAutoPlay();\n    }\n  };\n\n  const slideTo = (index: number) => {\n    if (index === current) {\n      return;\n    }\n    const rotatedArray = rotate(current, index, orderArray);\n    setCurrent(index);\n    setOrderArray(rotatedArray);\n    setDisplayArray(reallocateOrder(children, rotatedArray));\n  };\n\n  const slideToNext = () => {\n    let next = current + 1;\n    if (next > displayArray.length - 1) {\n      next = 0;\n    }\n    slideTo(next);\n  };\n\n  const slideToLast = () => {\n    let last = current - 1;\n    if (last < 0) {\n      last = displayArray.length - 1;\n    }\n    slideTo(last);\n  };\n\n  const startAutoPlay = () => {\n    stopAutoPlay();\n    autoPlayInterval = setInterval(() => {\n      slideToNext();\n    }, playSpeed);\n  };\n\n  const stopAutoPlay = () => {\n    clearInterval(autoPlayInterval);\n  };\n\n  return (\n    <Wrapper>\n      <Container ref={targetRef as any} style={{ height: contentHeight }}>\n        {displayArray.map((i: any) => (\n          <Slide\n            className={i.order}\n            key={i.index}\n            onClick={() => slideTo(i.index)}\n            onMouseEnter={() => onMouseEnter()}\n            onMouseLeave={() => onMouseLeave()}\n          >\n            <ChildWrapper>{i.child}</ChildWrapper>\n            <Overlay />\n          </Slide>\n        ))}\n      </Container>\n      {showNav && (\n        <Nav>\n          <LastButton onClick={() => slideToLast()} theme={theme}>\n            <span></span>\n          </LastButton>\n          <NextButton onClick={() => slideToNext()} theme={theme}>\n            <span></span>\n          </NextButton>\n        </Nav>\n      )}\n\n      {showDots && (\n        <Dots theme={theme}>\n          {displayArray.map(({ index, order }: DisplayElement) => {\n            return (\n              <div\n                key={index}\n                className={order === Order.CENTER ? 'active' : ''}\n                onClick={() => slideTo(index)}\n              >\n                <span>&nbsp;</span>\n              </div>\n            );\n          })}\n        </Dots>\n      )}\n    </Wrapper>\n  );\n};\n"],"names":["Order","Theme","reallocateOrder","componentArray","orderArray","map","i","idx","child","order","index","animation","Wrapper","styled","div","_templateObject","Container","_templateObject2","Overlay","_templateObject3","ControlButton","_templateObject4","props","theme","NextButton","_templateObject5","LastButton","_templateObject6","Nav","_templateObject7","ChildWrapper","_templateObject8","Slide","_templateObject9","Dots","_templateObject10","arr","autoPlayInterval","children","showDots","showNav","autoPlay","pauseOnHover","playSpeed","DARK","initialOrderArray","_i","CENTER","NEXT","length","LAST","HIDDEN","useState","contentHeight","setContentHeight","current","setCurrent","setOrderArray","displayArray","setDisplayArray","targetRef","useRef","useEffect","maxHeight","Array","from","forEach","grandChildren","height","offsetHeight","setTimeout","startAutoPlay","stopAutoPlay","slideTo","rotatedArray","oldCenter","newCenter","array","arrayCopy","data","pop","unshift","shift","push","rotate","slideToNext","next","setInterval","clearInterval","React","ref","style","className","key","onClick","onMouseEnter","onMouseLeave","last"],"mappings":"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"}
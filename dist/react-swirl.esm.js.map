{"version":3,"file":"react-swirl.esm.js","sources":["../src/interface.ts","../src/helper.ts","../src/styledComponents.ts","../src/index.tsx"],"sourcesContent":["export enum Order {\n  CENTER = 'center',\n  NEXT = 'next',\n  LAST = 'last',\n  HIDDEN = 'hidden',\n}\n\nexport interface DisplayElement {\n  child: any;\n  order: Order;\n  index: number;\n}\n\nexport interface ComponentSettings {\n  showDots?: boolean;\n  showNav?: boolean;\n  autoPlay?: boolean;\n  playSpeed?: number;\n  pauseOnHover?: boolean;\n  children: any[];\n}\n","import { Order, DisplayElement } from './interface';\n\nexport function generateOrderArray(arr: Array<any>): Array<Order> {\n  return arr.map((_i: any, idx: number) => {\n    let order: Order;\n    switch (idx) {\n      case 0:\n        order = Order.CENTER;\n        break;\n      case 1:\n        order = Order.NEXT;\n        break;\n      case arr.length - 1:\n        order = Order.LAST;\n        break;\n      default:\n        order = Order.HIDDEN;\n    }\n    return order;\n  });\n}\n\nexport function reallocateOrder(\n  componentArray: Array<any>,\n  orderArray: Array<Order>\n): Array<DisplayElement> {\n  return componentArray.map((i: any, idx: number) => {\n    const order = orderArray[idx];\n    return { child: i, order, index: idx };\n  });\n}\n\nexport function rotate(\n  oldCenter: number,\n  newCenter: number,\n  array: Array<any>\n) {\n  const arrayCopy = [...array];\n  while (oldCenter !== newCenter) {\n    if (newCenter > oldCenter) {\n      const data: any = arrayCopy.pop();\n      arrayCopy.unshift(data);\n      newCenter--;\n    } else {\n      const data: any = arrayCopy.shift();\n      arrayCopy.push(data);\n      newCenter++;\n    }\n  }\n  return arrayCopy;\n}\n","import styled from 'styled-components';\n\nconst animation = 'all 0.6s ease-in-out';\n\nexport const Wrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  overflow: hidden;\n  flex-direction: column;\n  padding: 0 20px;\n  position: relative;\n  box-sizing: border-box;\n`;\n\nexport const Container = styled.div`\n  width: 100%;\n  height: 100%;\n  margin: 0 auto;\n  position: relative;\n`;\n\nexport const Overlay = styled.div`\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: white;\n  opacity: 0.4;\n  transition: opacity 0.3s linear 0.5s;\n`;\n\nconst ControlButton = styled.div`\n  z-index: 9;\n  position: absolute;\n  top: 50%;\n  transform: translate(0, -50%);\n  cursor: pointer;\n  text-align: center;\n  width: 16px;\n  transition: ${animation};\n\n  span {\n    border: solid rgba(0, 0, 0, 0.5);\n    border-width: 0 4px 4px 0;\n    display: inline-block;\n    padding: 4px;\n    transition: ${animation};\n  }\n\n  &:hover {\n    span {\n      border-color: rgba(0, 0, 0, 0.8);\n    }\n    transform: translate(0, -50%) scale(1.1);\n  }\n`;\n\nexport const NextButton = styled(ControlButton)`\n  right: 4px;\n  span {\n    transform: rotate(-45deg);\n  }\n`;\n\nexport const LastButton = styled(ControlButton)`\n  span {\n    transform: rotate(135deg);\n  }\n  left: 4px;\n`;\n\nexport const Nav = styled.div``;\n\nexport const ChildWrapper = styled.div``;\n\nexport const Slide = styled.div`\n  position: absolute;\n  user-select: none;\n  transition: ${animation};\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  overflow: hidden;\n  max-width: 80%;\n\n  &:hover {\n    cursor: pointer;\n  }\n  &.center {\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    z-index: 9;\n    cursor: auto;\n\n    ${Overlay} {\n      opacity: 0;\n    }\n  }\n  &.last {\n    left: 40%;\n    top: 50%;\n    transform: translate(-50%, -50%) scale(0.9);\n    z-index: 6;\n  }\n  &.next {\n    left: 60%;\n    top: 50%;\n    transform: translate(-50%, -50%) scale(0.9);\n    z-index: 6;\n  }\n  &.hidden {\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%) scale(0.8);\n    opacity: 0;\n    z-index: 3;\n  }\n`;\n\nexport const Dots = styled.div`\n  z-index: 9;\n  margin-top: 5px;\n  user-select: none;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: wrap;\n  div {\n    transition: ${animation};\n    padding: 0 8px;\n    &:hover {\n      cursor: pointer;\n    }\n\n    &.active {\n      padding: 0;\n      span {\n        background-color: rgba(0, 0, 0, 0.8);\n        width: 16px;\n      }\n    }\n  }\n  span {\n    display: inline-block;\n    width: 8px;\n    height: 8px;\n    border-radius: 8px;\n    background-color: rgba(0, 0, 0, 0.5);\n    transition: ${animation};\n    vertical-align: middle;\n  }\n`;\n","import React, { useRef, useEffect, useState } from 'react';\n\nimport { Order, DisplayElement, ComponentSettings } from './interface';\nimport { generateOrderArray, reallocateOrder, rotate } from './helper';\nimport {\n  Wrapper,\n  Container,\n  Overlay,\n  Slide,\n  Dots,\n  NextButton,\n  LastButton,\n  ChildWrapper,\n  Nav,\n} from './styledComponents';\n\nexport const ReactSwirl = ({\n  children,\n  showDots = true,\n  showNav = true,\n  autoPlay = true,\n  pauseOnHover = true,\n  playSpeed = 5000,\n}: ComponentSettings) => {\n  const initialOrderArray = generateOrderArray(children);\n  const [contentHeight, setContentHeight] = useState(0);\n  const [current, setCurrent] = useState(0);\n  const [orderArray, setOrderArray] = useState(initialOrderArray);\n  const [displayArray, setDisplayArray] = useState(\n    reallocateOrder(children, orderArray)\n  );\n\n  const targetRef = useRef<HTMLDivElement>();\n  let autoPlayInterval: any;\n\n  useEffect(() => {\n    let maxHeight = contentHeight;\n    if (targetRef.current) {\n      const children = targetRef.current.children;\n      if (children && children.length) {\n        Array.from(children).forEach(child => {\n          const grandChildren = child.children;\n          if (grandChildren && grandChildren.length) {\n            const element = Array.from(grandChildren)[0] as HTMLDivElement;\n            const height = element.offsetHeight;\n            if (height > maxHeight) {\n              maxHeight = height;\n            }\n          }\n        });\n      }\n      setTimeout(() => {\n        setContentHeight(maxHeight);\n      });\n    }\n  }, [contentHeight]);\n\n  if (autoPlay) {\n    useEffect(() => {\n      startAutoPlay();\n      return () => stopAutoPlay();\n    });\n  }\n\n  const onMouseEnter = () => {\n    if (autoPlay && pauseOnHover) {\n      stopAutoPlay();\n    }\n  };\n\n  const onMouseLeave = () => {\n    if (autoPlay && pauseOnHover) {\n      startAutoPlay();\n    }\n  };\n\n  const slideTo = (index: number) => {\n    if (index === current) {\n      return;\n    }\n    const rotatedArray = rotate(current, index, orderArray);\n    setCurrent(index);\n    setOrderArray(rotatedArray);\n    setDisplayArray(reallocateOrder(children, rotatedArray));\n  };\n\n  const slideToNext = () => {\n    let next = current + 1;\n    if (next > displayArray.length - 1) {\n      next = 0;\n    }\n    slideTo(next);\n  };\n\n  const slideToLast = () => {\n    let last = current - 1;\n    if (last < 0) {\n      last = displayArray.length - 1;\n    }\n    slideTo(last);\n  };\n\n  const startAutoPlay = () => {\n    stopAutoPlay();\n    autoPlayInterval = setInterval(() => {\n      slideToNext();\n    }, playSpeed);\n  };\n\n  const stopAutoPlay = () => {\n    clearInterval(autoPlayInterval);\n  };\n\n  return (\n    <Wrapper>\n      <Container ref={targetRef as any} style={{ height: contentHeight }}>\n        {displayArray.map((i: any) => (\n          <Slide\n            className={i.order}\n            key={i.index}\n            onClick={() => slideTo(i.index)}\n            onMouseEnter={() => onMouseEnter()}\n            onMouseLeave={() => onMouseLeave()}\n          >\n            <ChildWrapper>{i.child}</ChildWrapper>\n            <Overlay />\n          </Slide>\n        ))}\n      </Container>\n      {showNav && (\n        <Nav>\n          <LastButton onClick={() => slideToLast()}>\n            <span></span>\n          </LastButton>\n          <NextButton onClick={() => slideToNext()}>\n            <span></span>\n          </NextButton>\n        </Nav>\n      )}\n\n      {showDots && (\n        <Dots>\n          {displayArray.map(({ index, order }: DisplayElement) => {\n            return (\n              <div\n                key={index}\n                className={order === Order.CENTER ? 'active' : ''}\n                onClick={() => slideTo(index)}\n              >\n                <span>&nbsp;</span>\n              </div>\n            );\n          })}\n        </Dots>\n      )}\n    </Wrapper>\n  );\n};\n"],"names":["Order","generateOrderArray","arr","map","_i","idx","order","CENTER","NEXT","length","LAST","HIDDEN","reallocateOrder","componentArray","orderArray","i","child","index","rotate","oldCenter","newCenter","array","arrayCopy","data","pop","unshift","shift","push","animation","Wrapper","styled","div","Container","Overlay","ControlButton","NextButton","LastButton","Nav","ChildWrapper","Slide","Dots","ReactSwirl","children","showDots","showNav","autoPlay","pauseOnHover","playSpeed","initialOrderArray","useState","contentHeight","setContentHeight","current","setCurrent","setOrderArray","displayArray","setDisplayArray","targetRef","useRef","autoPlayInterval","useEffect","maxHeight","Array","from","forEach","grandChildren","element","height","offsetHeight","setTimeout","startAutoPlay","stopAutoPlay","onMouseEnter","onMouseLeave","slideTo","rotatedArray","slideToNext","next","slideToLast","last","setInterval","clearInterval","React","ref","style","className","key","onClick"],"mappings":"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"}